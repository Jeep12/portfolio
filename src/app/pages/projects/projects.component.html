<section class="projects-hero">
  <div class="container">
    <h1 class="projects-title">Mis Proyectos</h1>
    <p class="projects-subtitle">Una muestra de mi trabajo y habilidades en desarrollo web</p>
  </div>
</section>

<section class="projects-filter">
  <div class="container">
    <div class="filter-buttons">
      <button 
        *ngFor="let category of categories" 
        [class.active]="selectedCategory === category"
        (click)="filterProjects(category)"
        class="filter-btn">
        {{ category }}
      </button>
    </div>
  </div>
</section>

<section class="projects-grid">
  <div class="container">
    <div class="projects-container">
      <div 
        *ngFor="let project of filteredProjects" 
        class="project-card"
        [@fadeInUp]>
        <div class="project-image">
          <!-- Carousel for projects with images -->
          <div class="image-carousel" *ngIf="project.images && project.images.length > 0">
            <div class="carousel-container">
              <img 
                [src]="getCurrentImage(project.id)" 
                [alt]="project.title" 
                class="project-image-real"
                (click)="openModal(project)"
                (mouseenter)="pauseCarousel(project.id)"
                (mouseleave)="resumeCarousel(project.id)">
              
              <!-- Image counter -->
              <div class="image-counter" *ngIf="project.images.length > 1">
                {{ getCurrentIndex(project.id) + 1 }} / {{ project.images.length }}
              </div>
            </div>
            
            <!-- Navigation arrows -->
            <button 
              class="carousel-arrow carousel-prev" 
              *ngIf="project.images.length > 1" 
              (click)="prevImage(project.id)">
              ‹
            </button>
            <button 
              class="carousel-arrow carousel-next" 
              *ngIf="project.images.length > 1" 
              (click)="nextImage(project.id)">
              ›
            </button>
            
            <!-- Indicators -->
            <div class="carousel-indicators" *ngIf="project.images.length > 1">
              <span 
                class="indicator" 
                *ngFor="let image of project.images; let i = index" 
                [class.active]="i === getCurrentIndex(project.id)"
                (click)="goToImage(project.id, i)">
              </span>
            </div>
          </div>
          
          <!-- Placeholder for projects without images -->
          <div class="image-placeholder" *ngIf="!project.images || project.images.length === 0">
            <span class="project-icon">{{ project.icon }}</span>
          </div>
        </div>
        
        <div class="project-content">
          <h3 class="project-title">{{ project.title }}</h3>
          <p class="project-description">{{ project.description }}</p>
          <div class="project-tags">
            <span 
              *ngFor="let tag of project.tags" 
              class="tag">
              {{ tag }}
            </span>
          </div>
          <div class="project-links">
            <a 
              *ngIf="project.github" 
              [href]="project.github" 
              target="_blank" 
              class="project-link github">
              <i class="fab fa-github"></i> GitHub
            </a>
            <a 
              *ngIf="project.demo" 
              [href]="project.demo" 
              target="_blank" 
              class="project-link demo">
              <i class="fas fa-external-link-alt"></i> Demo
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="cta-section">
  <div class="container">
    <div class="cta-content">
      <h2>¿Te gusta lo que ves?</h2>
      <p>Estoy siempre abierto a nuevos proyectos y colaboraciones interesantes.</p>
      <a routerLink="/contact" class="btn btn-primary">Contactar</a>
    </div>
  </div>
</section>

<!-- Image Modal -->
<div class="image-modal" *ngIf="isModalOpen" (click)="onModalClick($event)">
  <div class="modal-content">
    <button class="modal-close" (click)="closeModal()">×</button>
    <div class="modal-header" *ngIf="selectedProject">
      <h3>{{ selectedProject.title }}</h3>
    </div>
    <div class="modal-image-container">
      <img [src]="selectedImage" [alt]="selectedProject?.title" class="modal-image">
    </div>
  </div>
</div>
